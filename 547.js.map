{"version":3,"file":"547.js","mappings":"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","sources":["webpack://viteplace/./src/assets/crosshair.svg","webpack://viteplace/./src/hooks/useEvent.ts","webpack://viteplace/./src/hooks/useSubscription.ts","webpack://viteplace/./src/hooks/usePixels.ts","webpack://viteplace/./src/stores/NetworkStore.ts","webpack://viteplace/./src/vite.ts","webpack://viteplace/./src/components/PlaceCanvas.tsx","webpack://viteplace/./src/hooks/usePrevious.ts","webpack://viteplace/./src/hooks/useSize.ts","webpack://viteplace/./src/hooks/useColors.ts","webpack://viteplace/./src/pages/home/home.tsx"],"sourcesContent":["export default __webpack_public_path__ + \"1324a012423cd2d7eb903c9a88d60aff.svg\";","import React from \"react\";\nimport events from \"../events\";\nimport useForceUpdate from \"./useForceUpdate\";\nexport default function useEvent(event, defaultValue) {\n    const [value, setValue] = React.useState([defaultValue]);\n    const forceUpdate = useForceUpdate();\n    React.useEffect(() => {\n        const listener = (v) => {\n            setValue([v]);\n            forceUpdate();\n        };\n        events.on(event, listener);\n        return () => {\n            events.off(event, listener);\n        };\n    }, []);\n    return value[0];\n}\n","import React from \"react\";\nimport events from \"../events\";\nimport websocket from \"../websocket\";\nconst usedSubscriptions = {};\nexport default function useSubscription(sub, onEvent = () => { }, onClear) {\n    React.useEffect(() => {\n        usedSubscriptions[sub] = usedSubscriptions[sub] || 0;\n        usedSubscriptions[sub]++;\n        if (usedSubscriptions[sub] === 1) {\n            websocket.subscriptions.push(sub);\n            websocket.updateSubscriptions();\n        }\n        events.on(sub, onEvent);\n        return () => {\n            events.off(sub, onEvent);\n            usedSubscriptions[sub]--;\n            if (usedSubscriptions[sub] === 0) {\n                delete usedSubscriptions[sub];\n                websocket.subscriptions.splice(websocket.subscriptions.indexOf(sub), 1);\n                websocket.updateSubscriptions();\n                if (onClear)\n                    onClear();\n            }\n        };\n    }, []);\n}\n","import React from \"react\";\nimport websocket, { WebSocketStates } from \"../websocket\";\nimport useEvent from \"./useEvent\";\nimport useForceUpdate from \"./useForceUpdate\";\nimport useSubscription from \"./useSubscription\";\nlet cached_pixels = null;\nexport default function usePixels() {\n    const forceUpdate = useForceUpdate();\n    const wsState = useEvent(\"WS_STATE\", websocket.state);\n    React.useEffect(() => {\n        if (wsState !== WebSocketStates.OPEN)\n            cached_pixels = null;\n    }, [wsState]);\n    useSubscription(\"pixels\", (pixels) => {\n        cached_pixels = pixels;\n        forceUpdate();\n    }, () => {\n        cached_pixels = null;\n    });\n    const loaded = !!cached_pixels;\n    return {\n        loaded,\n        pixels: cached_pixels\n    };\n}\n","export var Network;\n(function (Network) {\n    Network[\"MAINNET\"] = \"MAINNET\";\n    Network[\"TESTNET\"] = \"TESTNET\";\n    Network[\"DEBUG\"] = \"DEBUG\";\n})(Network || (Network = {}));\nexport default new class NetworkStore {\n    getNetwork() {\n        return Network.MAINNET;\n    }\n};\nexport function displayNetworkName(network) {\n    return ({\n        [Network.MAINNET]: \"Mainnet\",\n        [Network.TESTNET]: \"Testnet\",\n        [Network.DEBUG]: \"Debug\"\n    })[network] || \"Unknown Network\";\n}\nexport function getNetworkNode(network, type) {\n    switch (type) {\n        case \"ws\":\n            return ({\n                [Network.MAINNET]: \"wss://node-vite.thomiz.dev/ws\",\n                [Network.TESTNET]: \"wss://buidl.vite.net/gvite/ws\",\n                [Network.DEBUG]: \"ws://127.0.0.1:23457\"\n            })[network];\n        case \"http\": {\n            return ({\n                [Network.MAINNET]: \"https://node-vite.thomiz.dev/http\",\n                [Network.TESTNET]: \"https://buidl.vite.net/gvite/http\",\n                [Network.DEBUG]: \"http://127.0.0.1:23456\"\n            })[network];\n        }\n    }\n}\n","import NetworkStore, { getNetworkNode } from \"./stores/NetworkStore\";\nimport { Client, Contract } from \"web3-vite\";\nexport const client = new Client(getNetworkNode(NetworkStore.getNetwork(), \"http\"));\nexport const CONTRACT_ADDRESS = \"vite_c4143df0d4f24b222cde922164ccb573cd57b7e3a027186b3b\";\nexport const CONTRACT_ABI = [{ \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"sizex\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"sizey\", \"type\": \"uint256\" }], \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"x\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"y\", \"type\": \"uint256\" }], \"name\": \"CanvasSizeChange\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": true, \"internalType\": \"uint256\", \"name\": \"hexColor\", \"type\": \"uint256\" }, { \"indexed\": true, \"internalType\": \"uint256\", \"name\": \"colorCode\", \"type\": \"uint256\" }], \"name\": \"NewColor\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": false, \"internalType\": \"address\", \"name\": \"owner\", \"type\": \"address\" }], \"name\": \"NewOwner\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [{ \"indexed\": true, \"internalType\": \"address\", \"name\": \"owner\", \"type\": \"address\" }, { \"indexed\": true, \"internalType\": \"uint256\", \"name\": \"x\", \"type\": \"uint256\" }, { \"indexed\": true, \"internalType\": \"uint256\", \"name\": \"y\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"color\", \"type\": \"uint256\" }, { \"indexed\": false, \"internalType\": \"uint256\", \"name\": \"timestamp\", \"type\": \"uint256\" }], \"name\": \"PixelChange\", \"type\": \"event\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"hexColor\", \"type\": \"uint256\" }], \"name\": \"addColor\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"colorCode\", \"type\": \"uint256\" }], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"addDefaultColors\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"getCanvasSize\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"x\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"y\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"colorCode\", \"type\": \"uint256\" }], \"name\": \"getColor\", \"outputs\": [{ \"internalType\": \"bool\", \"name\": \"exists\", \"type\": \"bool\" }, { \"internalType\": \"uint256\", \"name\": \"hexColor\", \"type\": \"uint256\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"x\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"y\", \"type\": \"uint256\" }], \"name\": \"getPixel\", \"outputs\": [{ \"internalType\": \"uint256\", \"name\": \"colorCode\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"hexColor\", \"type\": \"uint256\" }, { \"internalType\": \"address\", \"name\": \"owner\", \"type\": \"address\" }, { \"internalType\": \"uint256\", \"name\": \"timestamp\", \"type\": \"uint256\" }, { \"internalType\": \"bytes32\", \"name\": \"hash\", \"type\": \"bytes32\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"x\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"y\", \"type\": \"uint256\" }], \"name\": \"increaseCanvasSize\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [], \"name\": \"owner\", \"outputs\": [{ \"internalType\": \"address\", \"name\": \"\", \"type\": \"address\" }], \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"uint256\", \"name\": \"x\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"y\", \"type\": \"uint256\" }, { \"internalType\": \"uint256\", \"name\": \"color\", \"type\": \"uint256\" }], \"name\": \"placePixel\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [{ \"internalType\": \"address\", \"name\": \"newOwner\", \"type\": \"address\" }], \"name\": \"setOwner\", \"outputs\": [], \"stateMutability\": \"nonpayable\", \"type\": \"function\" }];\nexport const contract = new Contract(client, CONTRACT_ADDRESS, CONTRACT_ABI);\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n/** @jsx jsx */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { jsx } from \"@emotion/react\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport usePrevious from \"../hooks/usePrevious\";\nimport usePixels from \"../hooks/usePixels\";\nimport { createUseGesture, dragAction, pinchAction } from \"@use-gesture/react\";\nimport { useSpring, animated } from \"@react-spring/web\";\nimport darkTheme from \"../themes/dark\";\nimport { Button } from \"@mui/material\";\nimport wallet from \"../wallet\";\nimport { openViteConnect } from \"./Navbar\";\nimport { showToast } from \"../layers/Toasts\";\nimport * as vite from \"@vite/vitejs\";\nimport { CONTRACT_ABI, CONTRACT_ADDRESS } from \"../vite\";\nimport useMobile from \"../hooks/useMobile\";\nimport Sheet from \"react-modal-sheet\";\nconst useGesture = createUseGesture([dragAction, pinchAction]);\nexport const PixelSize = 64;\nexport default function PlaceCanvas(props) {\n    useEffect(() => {\n        const handler = e => e.preventDefault();\n        document.addEventListener(\"gesturestart\", handler);\n        document.addEventListener(\"gesturechange\", handler);\n        document.addEventListener(\"gestureend\", handler);\n        return () => {\n            document.removeEventListener(\"gesturestart\", handler);\n            document.removeEventListener(\"gesturechange\", handler);\n            document.removeEventListener(\"gestureend\", handler);\n        };\n    }, []);\n    const ref = useRef();\n    const [select, setSelect] = useState(null);\n    const [style, api] = useSpring(() => {\n        const pixelSizesScale = {\n            x: props.size.x * PixelSize + 100,\n            y: props.size.y * PixelSize + 200\n        };\n        let zoom = 1;\n        if (window.innerHeight - 64 < pixelSizesScale.y) {\n            zoom = Math.floor((window.innerHeight - 64) / pixelSizesScale.y * 100) / 100;\n        }\n        if (window.innerWidth < pixelSizesScale.x * zoom) {\n            zoom = Math.floor(window.innerWidth / pixelSizesScale.x * 100) / 100;\n        }\n        const pixelSizes = {\n            x: props.size.x * PixelSize,\n            y: props.size.y * PixelSize\n        };\n        return {\n            x: Math.round((window.innerWidth - pixelSizes.x) / 2),\n            y: Math.round((window.innerHeight - 64 - pixelSizes.y) / 2),\n            scale: zoom,\n            rotateZ: 0,\n        };\n    });\n    useGesture({\n        // onHover: ({ active, event }) => console.log('hover', event, active),\n        // onMove: ({ event }) => console.log('move', event),\n        onDrag: ({ pinching, cancel, offset: [x, y] }) => {\n            if (pinching)\n                return cancel();\n            api.start({ x, y });\n        },\n        onPinch: ({ origin: [ox, oy], first, movement: [ms], offset: [s], memo }) => {\n            if (first) {\n                const { width, height, x, y } = ref.current.getBoundingClientRect();\n                const tx = ox - (x + width / 2);\n                const ty = oy - (y + height / 2);\n                memo = [style.x.get(), style.y.get(), tx, ty];\n            }\n            const x = memo[0] - (ms - 1) * memo[2];\n            const y = memo[1] - (ms - 1) * memo[3];\n            api.start({ scale: s, rotateZ: 0, x, y });\n            return memo;\n        },\n    }, {\n        target: ref,\n        drag: { from: () => [style.x.get(), style.y.get()] },\n        pinch: { scaleBounds: { min: 0.5, max: 2 }, rubberband: true },\n    });\n    // Camera\n    return jsx(\"div\", { ref: ref, css: {\n            display: \"block\",\n            height: \"calc(100vh - 64px)\",\n            overflow: \"hidden\",\n            width: \"100%\",\n            userSelect: \"none\",\n            touchAction: \"manipulation\"\n        } },\n        jsx(animated.div, { ref: ref, style: style },\n            jsx(PlaceCanvasInternal, Object.assign({}, props, { getZoom: () => style.scale.get(), select: select, setSelect: (pos) => {\n                    // to put it in the middle\n                    const left = Math.round(-pos[0] * PixelSize + window.innerWidth / 2);\n                    const top = Math.round(-pos[1] * PixelSize + window.innerHeight / 2 - 128);\n                    api.start({ scale: 1, x: left, y: top });\n                    setSelect(pos);\n                } }))),\n        jsx(\"div\", { style: {\n                display: !select || props.readonly ? \"none\" : \"initial\"\n            } },\n            jsx(ColorSelection, { select: select, colors: props.colors })));\n}\nexport function ColorSelection(props) {\n    const isMobile = useMobile();\n    const [isOpen, setOpen] = useState(false);\n    const [colorIndex, setColorIndex] = useState(0);\n    if (!props.select)\n        return null;\n    const children = jsx(\"div\", { css: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            marginTop: 20,\n            alignItems: \"center\",\n            gap: 20,\n            marginLeft: 20,\n            marginRight: 20\n        } },\n        jsx(\"div\", { css: {\n                display: \"flex\",\n                flexDirection: \"row\",\n                gap: 10,\n                flexWrap: \"wrap\",\n                justifyContent: \"center\"\n            } }, props.colors.map((color, i) => {\n            return jsx(\"div\", { css: {\n                    backgroundColor: color,\n                    width: 50,\n                    height: 50,\n                    cursor: \"pointer\",\n                    transition: \"border-radius 0.2s\"\n                }, style: {\n                    borderRadius: colorIndex === i ? \"50%\" : 8\n                }, onClick: e => {\n                    e.stopPropagation();\n                    setColorIndex(i);\n                } });\n        })),\n        jsx(\"div\", null,\n            jsx(Button, { variant: \"outlined\", onClick: async () => {\n                    if (!wallet.ready) {\n                        openViteConnect();\n                    }\n                    else {\n                        const block = vite.accountBlock.createAccountBlock(\"callContract\", {\n                            address: wallet.accounts[0],\n                            abi: CONTRACT_ABI,\n                            methodName: \"placePixel\",\n                            tokenId: vite.constant.Vite_TokenId,\n                            amount: \"0\",\n                            toAddress: CONTRACT_ADDRESS,\n                            params: [...props.select, colorIndex]\n                        });\n                        showToast(\"Please accept the transaction on your phone!\", {\n                            type: \"info\",\n                            timeout: 3000,\n                            icon: true\n                        });\n                        try {\n                            await wallet.sendTransactionAsync({\n                                block: block.accountBlock\n                            });\n                        }\n                        catch (err) {\n                            console.error(err);\n                            showToast(`${err.name || err.error.code}: ${err.message || err.error.message}`, {\n                                type: \"error\",\n                                timeout: 5000,\n                                icon: true\n                            });\n                        }\n                        showToast(\"Pixel Placed!\", {\n                            type: \"success\",\n                            timeout: 1000,\n                            icon: true\n                        });\n                    }\n                } }, \"Place Pixel\")));\n    if (isMobile) {\n        return jsx(\"div\", { css: {\n                position: \"absolute\",\n                bottom: 0\n            } },\n            isOpen ? null : jsx(\"div\", { css: {\n                    backgroundColor: darkTheme.palette.secondary.main,\n                    paddingTop: 10,\n                    paddingBottom: 10,\n                    width: \"100vw\",\n                    display: \"flex\",\n                    justifyContent: \"center\"\n                } },\n                jsx(Button, { variant: \"outlined\", onClick: () => {\n                        setOpen(true);\n                    } }, \"Place Pixel\")),\n            jsx(Sheet, { isOpen: isOpen, onClose: () => setOpen(false), css: {\n                    \"& > .react-modal-sheet-container\": {\n                        backgroundColor: darkTheme.palette.secondary.main + \"!important\"\n                    },\n                    \"& > .react-modal-sheet-backdrop\": {\n                        backgroundColor: \"rgba(0, 0, 0, 0.3)!important\"\n                    },\n                    \"& > .react-modal-sheet-drag-indicator\": {\n                        backgroundColor: \"#666!important\"\n                    },\n                }, snapPoints: [\n                    480,\n                    0\n                ] },\n                jsx(Sheet.Container, null,\n                    jsx(Sheet.Header, null),\n                    jsx(Sheet.Content, null,\n                        jsx(\"div\", { css: {\n                                backgroundColor: darkTheme.palette.secondary.main\n                            } }, children))),\n                jsx(Sheet.Backdrop, null)));\n    }\n    return jsx(\"div\", { css: {\n            position: \"absolute\",\n            top: window.innerHeight - 200,\n            height: 200,\n            width: \"100%\",\n            backgroundColor: darkTheme.palette.secondary.main\n        } }, children);\n}\nexport function PlaceCanvasInternal(props) {\n    const [, setDragging] = useState(false);\n    const [rel, setRel] = useState(null);\n    const { loaded: pixelsLoaded, pixels } = usePixels();\n    const oldPixels = usePrevious(pixels);\n    const ref = useRef();\n    useEffect(() => {\n        var _a;\n        const canvas = ref.current;\n        if (!canvas || !pixelsLoaded)\n            return;\n        const ctx = canvas.getContext(\"2d\");\n        for (let x = 0; x < pixels.length; x++) {\n            const column = pixels[x];\n            for (let y = 0; y < column.length; y++) {\n                const pixel = column[y];\n                const oldPixel = ((_a = oldPixels === null || oldPixels === void 0 ? void 0 : oldPixels[x]) === null || _a === void 0 ? void 0 : _a[y]) || null;\n                if (pixel != oldPixel) {\n                    ctx.fillStyle = props.colors[pixel] || props.colors[0];\n                    //console.log(`Painting ${x}:${y} with color ${ctx.fillStyle}`)\n                    ctx.fillRect(x * PixelSize, y * PixelSize, PixelSize, PixelSize);\n                }\n            }\n        }\n    }, [\n        ref.current,\n        pixels,\n        pixelsLoaded\n    ]);\n    return jsx(React.Fragment, null,\n        props.select && jsx(\"img\", { css: {\n                position: \"absolute\",\n                opacity: 0.6\n            }, style: {\n                left: props.select[0] * PixelSize,\n                top: props.select[1] * PixelSize\n            }, src: require(\"../assets/crosshair.svg\").default, width: PixelSize, height: PixelSize, draggable: false }),\n        jsx(\"canvas\", { ref: ref, css: {\n                width: props.size.x * PixelSize,\n                height: props.size.y * PixelSize,\n                cursor: \"pointer\"\n            }, width: props.size.x * PixelSize, height: props.size.y * PixelSize, onMouseDown: (e) => {\n                if (e.button !== 0)\n                    return;\n                setDragging(true);\n                setRel({\n                    x: e.pageX,\n                    y: e.pageY\n                });\n            }, onMouseUp: (e) => {\n                if (e.button !== 0)\n                    return;\n                setDragging(false);\n                const pixels = Math.abs(rel.x - e.pageX) + Math.abs(rel.y - e.pageY);\n                if (pixels < 5) {\n                    // wasn\"t a drag\n                    // select the pixel\n                    const target = e.target;\n                    const rect = target.getBoundingClientRect();\n                    const x = e.pageX - rect.left;\n                    const y = e.pageY - rect.top;\n                    const zoom = props.getZoom();\n                    const posx = Math.floor(x / PixelSize / zoom);\n                    const posy = Math.floor(y / PixelSize / zoom);\n                    props.setSelect([posx, posy]);\n                }\n            } }));\n}\n","import { useEffect, useRef } from \"react\";\nexport default function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current = value;\n    });\n    return ref.current;\n}\n","import React from \"react\";\nimport websocket, { WebSocketStates } from \"../websocket\";\nimport useEvent from \"./useEvent\";\nimport useForceUpdate from \"./useForceUpdate\";\nimport useSubscription from \"./useSubscription\";\nlet cached_size = null;\nexport default function useSize() {\n    const forceUpdate = useForceUpdate();\n    const wsState = useEvent(\"WS_STATE\", websocket.state);\n    React.useEffect(() => {\n        if (wsState !== WebSocketStates.OPEN)\n            cached_size = null;\n    }, [wsState]);\n    useSubscription(\"size\", (size) => {\n        cached_size = size;\n        forceUpdate();\n    }, () => {\n        cached_size = null;\n    });\n    const loaded = !!cached_size;\n    return {\n        loaded,\n        size: cached_size\n    };\n}\n","import React from \"react\";\nimport websocket, { WebSocketStates } from \"../websocket\";\nimport useEvent from \"./useEvent\";\nimport useForceUpdate from \"./useForceUpdate\";\nimport useSubscription from \"./useSubscription\";\nlet cached_colors = null;\nexport default function useColors() {\n    const forceUpdate = useForceUpdate();\n    const wsState = useEvent(\"WS_STATE\", websocket.state);\n    React.useEffect(() => {\n        if (wsState !== WebSocketStates.OPEN)\n            cached_colors = null;\n    }, [wsState]);\n    useSubscription(\"colors\", (colors) => {\n        cached_colors = colors;\n        forceUpdate();\n    }, () => {\n        cached_colors = null;\n    });\n    const loaded = !!cached_colors;\n    return {\n        loaded,\n        colors: cached_colors\n    };\n}\n","/** @jsx jsx */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { jsx } from \"@emotion/react\";\nimport Loading from \"../../components/Loading\";\nimport PlaceCanvas from \"../../components/PlaceCanvas\";\nimport useSize from \"../../hooks/useSize\";\nimport useColors from \"../../hooks/useColors\";\nexport default function Home() {\n    const { loaded: colorsLoaded, colors: colors } = useColors();\n    const { loaded: sizeLoaded, size } = useSize();\n    if (!sizeLoaded || !colorsLoaded)\n        return jsx(Loading, null);\n    // need to render the canvas\n    return jsx(PlaceCanvas, { readonly: false, colors: colors, size: size });\n}\n"],"names":["useEvent","event","defaultValue","value","setValue","forceUpdate","useForceUpdate","listener","v","events","usedSubscriptions","useSubscription","sub","onEvent","onClear","websocket","cached_pixels","Network","getNetwork","MAINNET","client","Client","network","NetworkStore","TESTNET","DEBUG","CONTRACT_ADDRESS","CONTRACT_ABI","Contract","useGesture","createUseGesture","PixelSize","PlaceCanvas","props","useEffect","handler","e","preventDefault","document","addEventListener","removeEventListener","ref","useRef","select","setSelect","useState","style","api","useSpring","pixelSizesScale","size","x","y","zoom","window","innerHeight","Math","floor","innerWidth","pixelSizes","round","scale","rotateZ","onDrag","pinching","cancel","offset","start","onPinch","origin","ox","oy","first","movement","ms","s","memo","width","height","current","getBoundingClientRect","tx","ty","get","target","drag","from","pinch","scaleBounds","min","max","rubberband","css","display","overflow","userSelect","touchAction","animated","PlaceCanvasInternal","Object","assign","getZoom","pos","left","top","readonly","ColorSelection","colors","isMobile","useMobile","isOpen","setOpen","colorIndex","setColorIndex","children","flexDirection","marginTop","alignItems","gap","marginLeft","marginRight","flexWrap","justifyContent","map","color","i","backgroundColor","cursor","transition","borderRadius","onClick","stopPropagation","Button","variant","async","wallet","block","address","abi","methodName","tokenId","amount","toAddress","params","type","timeout","icon","accountBlock","err","console","error","name","code","message","position","bottom","dark","paddingTop","paddingBottom","onClose","snapPoints","setDragging","rel","setRel","loaded","pixelsLoaded","pixels","wsState","usePixels","oldPixels","usePrevious","_a","canvas","ctx","getContext","length","column","pixel","fillStyle","fillRect","opacity","src","draggable","onMouseDown","button","pageX","pageY","onMouseUp","abs","rect","posx","posy","cached_size","cached_colors","Home","colorsLoaded","useColors","sizeLoaded","useSize","Loading"],"sourceRoot":""}